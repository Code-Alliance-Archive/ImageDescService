<script type="text/javascript">
<!--
function getAvailableImageIds()
{
	return [
	<% @images.each do | image | %>
		"<%= image['id'] %>",
	<% end %>
	]
}

function nextButton()
{
	changeImage(1)
}

function previousButton()
{
	changeImage(-1)
}

function changeImage(delta)
{
	availableImageIds = getAvailableImageIds()
	currentId = document.getElementById("current_image_index").value
	if(availableImageIds.length == 0)
	{
		document.getElementById("current_image_index").value = "no images"
		return;
	}
	
	currentIndex = 0
	for (i=0; i<availableImageIds.length; i++)
	{
		if(availableImageIds[i] == currentId)
		{
			currentIndex = i;
			break;
		}
	}

	targetIndex = currentIndex;
	while(true)
	{
		targetIndex += delta
		count = availableImageIds.length
		if(targetIndex < 0 || targetIndex >= count)
		{
			return;
		}
		target = availableImageIds[targetIndex]
		side_image_anchor = parent.side_bar.document.getElementById(target)
		side_div = side_image_anchor.parentNode
		display = side_div.style.display
		if(display != "none")
			break;
	}
	parent.side_bar.location = "/daisy_book/side_bar#" + target
	parent.content.location = "/daisy_book/book/content#" + target
	document.getElementById("current_image_index").value = target
}

function showGuide() {
    window.open('/help/DescriptionGuidance.html', '_guide',
            'height=400,width=700,status=false,menubar=0,location=0,toolbar=1,scrollbars=yes,left=100,top=100');
}
// -->
</script>
<input type="Button" id="previous" value="&lt;&lt;Previous" onclick="previousButton()"></input>
<input type="Button" id="next" value="Next&gt;&gt;" onclick="nextButton()"></input>

<div class='right'>
<a href='#' onClick="showGuide()">
  <img src='/images/info.png' width='20' height='20'></img>

</a>
</div>
<div class='clear'/>
 
<form name="navigation_helpers" id="nav_help">
<input type="hidden" value="" name="current_image_index" id="current_image_index" size="20"></input>
</form>
