<script type="text/javascript">
<!--
function getAvailableImageIds()
{
	return [
	<% @images.each do | image | %>
		"<%= image['id'] %>",
	<% end %>
	]
}

function nextButton()
{
	changeImage(1)
}

function previousButton()
{
	changeImage(-1)
}

function changeImage(delta)
{
	availableImageIds = getAvailableImageIds()
	currentId = document.getElementById("current_image_index").value
	if(availableImageIds.length == 0)
	{
		document.getElementById("current_image_index").value = "no images"
		return;
	}
	currentIndex = 0
	for (i=0; i<availableImageIds.length; i++)
	{
		if(availableImageIds[i] == currentId)
		{
			currentIndex = i;
			break;
		}
	}
	targetIndex = currentIndex + delta
	count = availableImageIds.length
	if(targetIndex < 0 || targetIndex >= count)
	{
		return;
	}
	target = availableImageIds[targetIndex]
	document.getElementById("current_image_index").value = target
	parent.side_bar.location = "/daisy_book/side_bar#" + target
	parent.content.location = "/daisy_book/content#" + target
}
// -->
</script>
<input type="Button" id="previous" value="&lt;&lt;Previous" onclick="previousButton()"></input>
<input type="Button" id="next" value="Next&gt;&gt;" onclick="nextButton()"></input>

<%= button_to "Download XML", :action => "get_xml_with_descriptions" %>
<%= button_to "Download Daisy Book", :action => "get_daisy_with_descriptions" %>

<form name="navigation_helpers" id="nav_help">
<input type="hidden" value="" name="current_image_index" id="current_image_index" size="20"></input>
</form>
